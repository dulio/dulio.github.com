---
layout: post
title:  "使用tar加密文件"
keyword: "tar,加密,运维,安全,openssl"
date:   2014-12-10
categories: linux
tags:	shell linux tar openssl
---

tar是Linux下非常常用的压缩工具，相信大家Windows下使用过压缩工具的都知道压缩的时候加密的功能。其实是tar下可以通过openssl加密来保护压缩的内容。例如在远程主机上保存的备份文件，通过这种加密方式，可以放心地放到第三方的存储平台。

下面将使用openssl来加密流的方式加密文件，并使用了盐值

### 压缩: ###

{% highlight bash %}
$ tar -zcvf - INPUT_FILE_OR_DIR | openssl CRYPT_TYPE -salt -k SECRET_PASSWORD | dd of=OUTPUT_TAR_FILE
{% endhighlight %}


### 解压: ###

{% highlight bash %}
$ dd if=INPUT_TAR_FILE | openssl CRYPT_TYPE -d -k SECRET_PASSWORD | tar -zxf -
{% endhighlight %}

替换上面的大写部分

注意：命令最后有"-"，它将释放所有的文件。其中-k password可以不使用，这样执行完命令后会提示你输入密码，加上-k参数表示在程序中自动验证密码 [引用](http://blog.csdn.net/cuijianzhongswust/article/details/10000091){:target="_blank"}

### 关于OpenSSL ###

关于openssl，在debian wheezy的包版本是1.0.1e, 用以下命令查看加密方式：

{% highlight bash %}
$ openssl ciphers
{% endhighlight %}
